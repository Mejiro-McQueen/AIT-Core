#!/usr/bin/env python

import fcntl
import os
import sys
import argparse
import traceback
from bifrost.services.core.launcher import Launcher
import base64
from colorama import Back
import os

spike = b'4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCQ4qKm4qOk4qOk4qOk4qOE4qOk4qO+4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO94qO/4qKo4qG/4qCf4qCb4qO74qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/CuKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKisuKjpOKjpOKjgOKjvuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KjieKgu+Kjv+Kjv+Kjv+Kjv+Kjv+Khj+KgieKgieKgieKgieKiqeKjvwrioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioojio6nio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7fio7bioa3iop3io7vio7/io7/io7/io7fio7/io7/io7/io78K4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCg4qKk4qO+4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOv4qOt4qG/4qCb4qO74qO/4qO/4qO/4qO/CuKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKioOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KjtuKjv+Kju+Kjv+Kjv+Kjv+KjvwrioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDio7Dio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7fio7bio7bio6Xio6zio63io78K4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCw4qCa4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOv4qGN4qC54qC/CuKggOKggOKggOKggOKggOKggOKggOKigOKjtOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khh+KjtOKjtuKjtuKjvgrioIDioIDioIDioYTioIDioIDio6Diop/io77io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/iob/io7/io7/io7/io7/ioIviorvio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/ioYfiopvioZvio7nio78K4qCA4qCA4qCA4qO34qGA4qCA4qKx4qCf4qK74qO/4qO/4qO/4qO/4qO/4qO/4qO/4qG/4qKr4qO94qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOP4qK54qCP4qO84qO/4qOf4qOb4qOZ4qGS4qO+4qO/4qOA4qK54qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qC/4qKb4qOj4qO/4qO/CuKhhOKggOKigOKjv+Kjh+KjpOKjvuKivuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khh+KjvuKiv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kiv+Kjh+KggOKgmeKgv+Kgv+Kjv+Khj+Kgm+Kiv+KhruKgmeKiu+Khv+KioeKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KjreKituKjv+Khv+Kjv+Kjv+Kjvwrio4fioIDiorjio7/ioY/ioIHioIDio77io7/io7/io7/io7/io7/io7/io7/io7/io6fioqfiobjiob/ioJ/io7/io7/io7/io7/io7/ioIjio7/ioIDioIDioIDioIDioIDioIDioIDioKziobfioJbioIvio6Dio77io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/iob/ioL/ioIvioIHioIDioJnioLviorbio43ioZsK4qG/4qK/4qGH4qK54qG/4qKm4qGA4qCZ4qCb4qK/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOO4qK74qGb4qCC4qO/4qO/4qG/4qCZ4qCD4qCI4qCB4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCI4qCB4qCA4qO/4qGf4qKb4qOm4qO54qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qO24qC+4qCA4qCA4qCA4qCA4qCA4qCA4qCJ4qC7CuKjpuKjv+KhieKgu+Kjv+Kjr+KgueKggOKjkOKipuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjt+KjhOKjoOKgmOKiv+Kjt+KjhOKhgOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKjv+Kiv+Kgn+KioOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kiv+Khm+Kgi+KggeKggOKggOKggOKggOKggOKggOKggOKggOKggOKggAriorvioJnior/io6bioYjioJvio4TioYDioIjioIDioInioJvio7/io7/io7/io7/io7/io7/io7/io7/io7/io6fiorjioIfioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioLjioITioIDio77io7/io7/io7/io7/io7/ioJvioJvioJvioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qCY4qCA4qCA4qCZ4qK74qO24qOE4qCZ4qKm4qGA4qCA4qCA4qCI4qC54qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOn4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKA4qCA4qCA4qKA4qGG4qO84qO/4qO/4qO/4qK74qGN4qCB4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKggOKgiOKgu+Kit+KjhOKgiOKgpuKhgOKjgOKjtOKituKjv+Kjn+Kgm+Kgq+KgjeKgieKgieKgieKgmeKgm+Kgm+Kgm+Kgm+Kgm+Kgm+Kgm+Kgm+Kiu+Kjv+Kjn+KhveKgtuKgmuKiv+Kjt+KhvuKgi+KhsOKgi+KiueKjn+KgmeKit+KggeKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDioIDiooDio4Dio4DioLvior/ioZ/ioInioLvioLbioKfioITioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDio6Dio7bioL/ioq/ioaXio6TioKTio6Tio4Dio7viooXiobTioIPioIDiorjioJvioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qOA4qCA4qKw4qO/4qG/4qC/4qKn4qOk4qO+4qG/4qCb4qC74qK/4qGb4qCy4qKk4qOA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qOg4qK+4qG/4qCL4qCA4qCg4qOE4qOI4qKb4qOE4qG54qOn4qGe4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKgiOKggeKiuuKjv+Khh+KjoOKjtuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjt+KjtuKjreKhs+KipOKhgOKggOKggOKgkOKipOKjoOKinuKjteKgi+KggOKggOKggOKggOKgiOKgm+Kgv+Kgi+KjueKjvuKhm+KgtuKjhOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDio7jio7/io77io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7fior/io7fio7bio7bio7/io7Xio7/io7/io7fio4TioIDioIDioIDioIDioIDioIDio7zioIPioIDioJnioLLioYzioLPio4TioIDioIDioIDioIDio4DioaTioLbioLbioKbio6Tio4DioIDiooDio4DioYDioIDioIDioIDioIDioIAK4qCA4qOg4qO04qO+4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qOd4qO/4qOn4qOd4qO74qG/4qO/4qO/4qO/4qO34qOm4qOE4qOA4qOA4qO84qO/4qG34qOE4qCA4qCA4qCZ4qKm4qO44qOn4qCU4qOb4qO/4qC34qCL4qCZ4qCy4qC24qOE4qCJ4qCJ4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKjvOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KjneKiv+KjhOKjieKjt+KirOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kgv+Kgv+Kjt+KjhOKggOKggOKgm+Kgm+Kgm+KgieKggOKggOKggOKggOKggOKggOKgiOKit+KhhOKggOKggOKggOKggOKggOKggOKggOKggArio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io4bioLnio7/io7fio7/io7/io7/io7/io7/iob/ioJvioInioIDioIDioIDioIjioJviorfio6Tio4DioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioLnio4TiooDioIDioIDioIDioIDioIDioIAK4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qOG4qCI4qC74qO/4qO/4qO/4qO/4qOu4qGz4qOE4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCI4qCb4qCb4qCy4qKk4qOA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCI4qC74qO24qGE4qCA4qCA4qCA4qCACuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjt+KjhOKgmOKjv+Kjv+Kjj+KgieKgu+KjveKjp+KjpOKjtOKjluKjsuKgtuKgrOKgveKgv+KgtuKgluKgt+KjrOKhieKgieKgguKggOKggOKggOKggOKggOKggOKggOKggOKgieKgk+KgtuKgtuKhggrio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/ioYPioIjiorvio7/ioqfiooDio6Dio5nio7vio7/io7/io7/io7fio4TioIDioIDioIDioIDioYDio7/ioYfioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO+4qO/4qO/4qOk4qCf4qK/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qOE4qCA4qKw4qG34qO/4qOH4qOA4qOA4qOA4qO04qO24qOk4qOA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khn+Kgh+KggOKiu+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khl+KikuKji+KjieKjieKjreKjj+Kgu+KjtuKhluKiveKjj+Kgs+KjpOKhgOKggOKggOKggOKggOKggArio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io4TioIDioIjio7/iob/io7/io7/io7/io7/io7/io7/io7fio77io7/io7/io7/ioY/ioInioLPioqTioYniorrio7/ioYbioIDioInioILioIDioIDioIDioIAK4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qGA4qO54qO/4qO24qOd4qC/4qO/4qO/4qO/4qK/4qO/4qO/4qO/4qO/4qGH4qCA4qCA4qCA4qCZ4qO+4qO/4qK74qGE4qCA4qCA4qCA4qCA4qCA4qCACuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KgmeKjv+Kjv+Kjt+KjjOKgm+Kiv+KjjOKiu+Kjv+Kjv+Kjv+Kjv+Kjt+KjtOKhpOKggOKjv+Kjv+KisOKjv+KggOKggOKggOKggOKggOKggArio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io6fioZjior/io7/io7/io7/io6bioZnioL/io7/io7/io7/io7/io7/io7/ioIDioIDio7/io7/io77io7/io7fioIDioIDioIDioIDioIA='

def running():
    lock_file = os.open("/tmp/bifrost_launch_services.lock", os.O_WRONLY | os.O_CREAT)
    try:
        fcntl.lockf(lock_file, fcntl.LOCK_EX | fcntl.LOCK_NB)
        already_running = False
    except IOError:
        already_running = True
    return already_running


def main():
    ap = argparse.ArgumentParser(
        description=__doc__, formatter_class=argparse.ArgumentDefaultsHelpFormatter
    )
    args = ap.parse_args()  # noqa

    if running():
        print("An instance of Bifrost is already running or could not obtain /tmp/bifrost_launch_services.lock flock.")
        sys.exit(-1)

    try:
        print(f'{base64.b64decode(spike).decode("utf-8")}')
        print(f"\t\t\t{Back.BLUE}Bifrost GDS{Back.RESET}")
        service = Launcher()
    except Exception as e:
        print(e)


if __name__ == "__main__":
    main()


